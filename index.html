<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø³ØªÙØ§Ø¯Ø© - LLMP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Tajawal', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header h1 {
            color: #2E7D32;
            font-size: 32px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header p {
            color: #666;
            font-size: 16px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .stat-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #2E7D32;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .main-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: #2E7D32;
            color: white;
        }

        .btn-primary:hover {
            background: #1B5E20;
            transform: scale(1.05);
        }

        .btn-secondary {
            background: #1976D2;
            color: white;
        }

        .btn-secondary:hover {
            background: #1565C0;
        }

        .btn-cancel {
            background: #757575;
            color: white;
        }

        .btn-cancel:hover {
            background: #616161;
        }

        .lessons-container {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .section-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-bar {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }

        .search-bar:focus {
            outline: none;
            border-color: #2E7D32;
        }

        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #E0E0E0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .filter-btn:hover {
            border-color: #2E7D32;
            color: #2E7D32;
        }

        .filter-btn.active {
            background: #2E7D32;
            color: white;
            border-color: #2E7D32;
        }

        .lesson-card {
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .lesson-card:hover {
            border-color: #2E7D32;
            box-shadow: 0 5px 20px rgba(46, 125, 50, 0.1);
            transform: translateX(-5px);
        }

        .lesson-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .lesson-title {
            font-size: 20px;
            color: #333;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .lesson-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .badge-success {
            background: #E8F5E9;
            color: #2E7D32;
        }

        .badge-warning {
            background: #FFF3E0;
            color: #F57C00;
        }

        .badge-danger {
            background: #FFEBEE;
            color: #D32F2F;
        }

        .badge-info {
            background: #E3F2FD;
            color: #1976D2;
        }

        .lesson-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lesson-excerpt {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .lesson-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #E0E0E0;
        }

        .lesson-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn {
            padding: 8px 20px;
            background: #2E7D32;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .view-btn:hover {
            background: #1B5E20;
            transform: scale(1.05);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 30px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: #f5f5f5;
        }

        .close-btn:hover {
            color: white;
            background: #D32F2F;
        }

        .detail-section {
            margin-bottom: 30px;
        }

        .detail-section h3 {
            color: #2E7D32;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .detail-section p, .detail-section ul {
            color: #555;
            line-height: 1.8;
        }

        .detail-section ul {
            list-style-position: inside;
            padding-right: 20px;
        }

        .detail-section ul li {
            margin-bottom: 10px;
        }

        /* Wizard Styles */
        .wizard-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
            padding: 0 10px;
        }

        .wizard-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 60px;
            left: 60px;
            height: 2px;
            background: #E0E0E0;
            z-index: 0;
        }

        .wizard-step {
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .step-number {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #E0E0E0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 18px;
        }

        .wizard-step.active .step-number {
            background: #2E7D32;
            color: white;
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
            transform: scale(1.1);
        }

        .wizard-step.completed .step-number {
            background: #4CAF50;
            color: white;
        }

        .wizard-step.completed .step-number::after {
            content: 'âœ“';
        }

        .step-label {
            font-size: 14px;
            color: #666;
            font-weight: 600;
        }

        .wizard-step.active .step-label {
            color: #2E7D32;
        }

        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group label .required {
            color: #D32F2F;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #2E7D32;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .category-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
        }

        .category-option {
            padding: 20px;
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .category-option:hover {
            border-color: #2E7D32;
            transform: translateY(-2px);
        }

        .category-option.selected {
            border-color: #2E7D32;
            background: #E8F5E9;
        }

        .category-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .type-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }

        .type-option {
            padding: 15px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .type-option:hover {
            border-color: #2E7D32;
            transform: translateY(-2px);
        }

        .type-option.selected {
            border-color: #2E7D32;
            background: #E8F5E9;
        }

        .wizard-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #E0E0E0;
        }

        .success-message {
            background: #E8F5E9;
            border: 2px solid #4CAF50;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
        }

        .success-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .success-message h3 {
            color: #2E7D32;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .success-message p {
            color: #666;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .main-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .modal-content {
                padding: 20px;
            }

            .wizard-steps {
                flex-wrap: wrap;
            }

            .wizard-step {
                flex-basis: 50%;
                margin-bottom: 20px;
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state-icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .impact-levels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
        }

        .impact-level {
            padding: 12px;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .impact-level:hover {
            transform: translateY(-2px);
        }

        .impact-level.selected {
            border-color: #2E7D32;
            background: #E8F5E9;
        }

        .impact-low { border-color: #4CAF50; }
        .impact-low.selected { background: #E8F5E9; border-color: #4CAF50; }
        
        .impact-medium { border-color: #FF9800; }
        .impact-medium.selected { background: #FFF3E0; border-color: #FF9800; }
        
        .impact-high { border-color: #F44336; }
        .impact-high.selected { background: #FFEBEE; border-color: #F44336; }
        
        .impact-critical { border-color: #9C27B0; }
        .impact-critical.selected { background: #F3E5F5; border-color: #9C27B0; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <span>ğŸ“š</span>
                Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø³ØªÙØ§Ø¯Ø©
            </h1>
            <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ© - Ø§Ù„ØªÙ‚Ø·ØŒ ÙˆØ«Ù‘Ù‚ØŒ ÙˆØ´Ø§Ø±Ùƒ Ø®Ø¨Ø±Ø§ØªÙƒ ÙˆØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†</p>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“</div>
                <div class="stat-value" id="totalLessons">3</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø±ÙˆØ³</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-value">3</div>
                <div class="stat-label">Ù…Ø³Ø§Ù‡Ù… Ù†Ø´Ø·</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“ˆ</div>
                <div class="stat-value">+100%</div>
                <div class="stat-label">Ù†Ù…Ùˆ Ø´Ù‡Ø±ÙŠ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">â­</div>
                <div class="stat-value" id="avgRating">4.6</div>
                <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</div>
            </div>
        </div>

        <!-- Main Actions -->
        <div class="main-actions">
            <button class="btn btn-primary" onclick="showAddLessonForm()">
                <span>â•</span>
                Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ù…Ø³ØªÙØ§Ø¯ Ø¬Ø¯ÙŠØ¯
            </button>
            <button class="btn btn-secondary" onclick="showAnalytics()">
                <span>ğŸ“Š</span>
                Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
            </button>
        </div>

        <!-- Lessons Container -->
        <div class="lessons-container">
            <h2 class="section-title">
                <span>ğŸ“–</span>
                Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø³ØªÙØ§Ø¯Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©
            </h2>

            <input type="text" class="search-bar" id="searchBar" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¯Ø±Ø³...">

            <div class="filters">
                <button class="filter-btn active" data-filter="all">Ø§Ù„ÙƒÙ„</button>
                <button class="filter-btn" data-filter="success">âœ… Ù†Ø¬Ø§Ø­Ø§Øª</button>
                <button class="filter-btn" data-filter="failure">âŒ Ø¥Ø®ÙØ§Ù‚Ø§Øª</button>
                <button class="filter-btn" data-filter="warning">âš ï¸ ØªØ­Ø°ÙŠØ±Ø§Øª</button>
                <button class="filter-btn" data-filter="opportunity">ğŸ’¡ ÙØ±Øµ</button>
            </div>

            <div id="lessonsContainer"></div>
        </div>
    </div>

    <!-- Modal for Lesson Details -->
    <div id="lessonModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">Ã—</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Modal for Add Lesson Form -->
    <div id="addLessonModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAddLessonForm()">Ã—</span>
            <h2 style="margin-bottom: 30px;">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ù…Ø³ØªÙØ§Ø¯ Ø¬Ø¯ÙŠØ¯</h2>
            
            <div class="wizard-steps">
                <div class="wizard-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©</div>
                </div>
                <div class="wizard-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Ø§Ù„Ø³ÙŠØ§Ù‚</div>
                </div>
                <div class="wizard-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Ø§Ù„ØªØ­Ù„ÙŠÙ„</div>
                </div>
                <div class="wizard-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Ø§Ù„ØªÙˆØµÙŠØ§Øª</div>
                </div>
            </div>

            <form id="addLessonForm">
                <!-- Step 1: Basic Info -->
                <div class="form-step active" data-step="1">
                    <div class="form-group">
                        <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù…Ø³ØªÙØ§Ø¯ <span class="required">*</span></label>
                        <input type="text" id="lessonTitle" required placeholder="Ù…Ø«Ø§Ù„: ØªØ­Ø³ÙŠÙ† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø¨Ù†Ø§Ø¡">
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹/Ø§Ù„Ù…Ù‡Ù…Ø© <span class="required">*</span></label>
                        <input type="text" id="projectName" required placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ù…Ù‡Ù…Ø©">
                    </div>

                    <div class="form-group">
                        <label>Ø§Ù„ØªØµÙ†ÙŠÙ <span class="required">*</span></label>
                        <div class="category-options">
                            <div class="category-option" data-category="projects">
                                <div class="category-icon">ğŸ“Š</div>
                                <div>Ù…Ø´Ø§Ø±ÙŠØ¹</div>
                            </div>
                            <div class="category-option" data-category="operations">
                                <div class="category-icon">âš™ï¸</div>
                                <div>Ø¹Ù…Ù„ÙŠØ§Øª</div>
                            </div>
                            <div class="category-option" data-category="relations">
                                <div class="category-icon">ğŸ¤</div>
                                <div>Ø¹Ù„Ø§Ù‚Ø§Øª</div>
                            </div>
                            <div class="category-option" data-category="technical">
                                <div class="category-icon">ğŸ’»</div>
                                <div>ØªÙ‚Ù†ÙŠØ©</div>
                            </div>
                            <div class="category-option" data-category="financial">
                                <div class="category-icon">ğŸ’°</div>
                                <div>Ù…Ø§Ù„ÙŠØ©</div>
                            </div>
                        </div>
                        <input type="hidden" id="lessonCategory" required>
                    </div>

                    <div class="form-group">
                        <label>Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø±Ø³ <span class="required">*</span></label>
                        <div class="type-options">
                            <div class="type-option" data-type="success">
                                <div style="font-size: 24px; margin-bottom: 5px;">âœ…</div>
                                <div>Ù†Ø¬Ø§Ø­</div>
                            </div>
                            <div class="type-option" data-type="failure">
                                <div style="font-size: 24px; margin-bottom: 5px;">âŒ</div>
                                <div>ÙØ´Ù„</div>
                            </div>
                            <div class="type-option" data-type="warning">
                                <div style="font-size: 24px; margin-bottom: 5px;">âš ï¸</div>
                                <div>ØªØ­Ø°ÙŠØ±</div>
                            </div>
                            <div class="type-option" data-type="opportunity">
                                <div style="font-size: 24px; margin-bottom: 5px;">ğŸ’¡</div>
                                <div>ÙØ±ØµØ©</div>
                            </div>
                        </div>
                        <input type="hidden" id="lessonType" required>
                    </div>
                </div>

                <!-- Step 2: Context -->
                <div class="form-step" data-step="2">
                    <div class="form-group">
                        <label>Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø­Ø¯Ø«ØŸ <span class="required">*</span></label>
                        <textarea id="situation" required placeholder="ØµÙ Ø§Ù„Ù…ÙˆÙ‚Ù Ø£Ùˆ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø°ÙŠ Ø­ØµÙ„..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ù…Ø§ ÙƒØ§Ù† Ø§Ù„Ø³ÙŠØ§Ù‚ØŸ</label>
                        <textarea id="context" placeholder="Ø§Ø´Ø±Ø­ Ø§Ù„Ø¸Ø±ÙˆÙ ÙˆØ§Ù„Ù…Ù„Ø§Ø¨Ø³Ø§Øª Ø§Ù„Ù…Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ø­Ø¯Ø«..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</label>
                        <textarea id="expectedOutcome" placeholder="Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙƒÙ†ØªÙ… ØªØªÙˆÙ‚Ø¹ÙˆÙ† Ø­Ø¯ÙˆØ«Ù‡ØŸ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©</label>
                        <textarea id="actualOutcome" placeholder="Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø­Ø¯Ø« ÙØ¹Ù„ÙŠØ§Ù‹ØŸ"></textarea>
                    </div>
                </div>

                <!-- Step 3: Analysis -->
                <div class="form-step" data-step="3">
                    <div class="form-group">
                        <label>Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù†Ø¬Ø­ØŸ <span class="required">*</span></label>
                        <textarea id="whatWorked" required placeholder="Ø§Ø°ÙƒØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ÙˆØ§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„ØªÙŠ Ø£Ø¯Øª Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù„Ù… ÙŠÙ†Ø¬Ø­ØŸ</label>
                        <textarea id="whatDidntWork" placeholder="Ø§Ø°ÙƒØ± Ù…Ø§ Ù„Ù… ÙŠÙ†Ø¬Ø­ Ø£Ùˆ Ù…Ø§ ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ†..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø¬Ø°Ø±ÙŠ</label>
                        <textarea id="rootCause" placeholder="Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØ±Ø§Ø¡ Ø§Ù„Ù†ØªÙŠØ¬Ø©ØŸ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ£Ø«ÙŠØ± <span class="required">*</span></label>
                        <div class="impact-levels">
                            <div class="impact-level impact-low" data-impact="low">
                                <div style="font-size: 20px; margin-bottom: 5px;">ğŸŸ¢</div>
                                <div>Ù…Ù†Ø®ÙØ¶</div>
                            </div>
                            <div class="impact-level impact-medium" data-impact="medium">
                                <div style="font-size: 20px; margin-bottom: 5px;">ğŸŸ¡</div>
                                <div>Ù…ØªÙˆØ³Ø·</div>
                            </div>
                            <div class="impact-level impact-high" data-impact="high">
                                <div style="font-size: 20px; margin-bottom: 5px;">ğŸŸ </div>
                                <div>Ø¹Ø§Ù„ÙŠ</div>
                            </div>
                            <div class="impact-level impact-critical" data-impact="critical">
                                <div style="font-size: 20px; margin-bottom: 5px;">ğŸ”´</div>
                                <div>Ø­Ø±Ø¬</div>
                            </div>
                        </div>
                        <input type="hidden" id="impactLevel" required>
                    </div>
                </div>

                <!-- Step 4: Recommendations -->
                <div class="form-step" data-step="4">
                    <div class="form-group">
                        <label>Ø§Ù„ØªÙˆØµÙŠØ§Øª Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ <span class="required">*</span></label>
                        <textarea id="recommendations" required placeholder="Ù…Ø§ Ù‡ÙŠ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ù„ØªØ·Ø¨ÙŠÙ‚Ù‡Ø§ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ØŸ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©</label>
                        <textarea id="preventiveMeasures" placeholder="Ù…Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø§ØªØ®Ø§Ø°Ù‡Ø§ Ù„ØªÙØ§Ø¯ÙŠ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ØŸ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                        <textarea id="additionalNotes" placeholder="Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© ØªÙˆØ¯ Ù…Ø´Ø§Ø±ÙƒØªÙ‡Ø§..."></textarea>
                    </div>

                    <div class="success-message" style="display: none;" id="successMessage">
                        <div class="success-icon">âœ…</div>
                        <h3>ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­!</h3>
                        <p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø³Ø§Ù‡Ù…ØªÙƒ ÙÙŠ Ø¥Ø«Ø±Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©</p>
                    </div>
                </div>

                <div class="wizard-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeAddLessonForm()">Ø¥Ù„ØºØ§Ø¡</button>
                    <div style="display: flex; gap: 10px;">
                        <button type="button" class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">
                            â† Ø§Ù„Ø³Ø§Ø¨Ù‚
                        </button>
                        <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                            Ø§Ù„ØªØ§Ù„ÙŠ â†
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global variables
        let lessons = [
            {
                id: 1,
                title: "ØªØ­Ø³ÙŠÙ† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠ",
                category: "Ù…Ø´Ø§Ø±ÙŠØ¹",
                type: "success",
                author: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
                date: "Ù…Ù†Ø° Ø³Ø§Ø¹ØªÙŠÙ†",
                excerpt: "ÙˆØ§Ø¬Ù‡ Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠ ØªØ£Ø®ÙŠØ±Ø§Øª Ø¨Ø³Ø¨Ø¨ Ø¹Ø¯Ù… Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„ÙƒØ§ÙÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©. ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ù†Ù…ÙˆØ°Ø¬ Ø¬Ø¯ÙŠØ¯ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ù…Ø¨ÙƒØ±Ø© Ù…Ù…Ø§ Ø³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªØ£Ø®ÙŠØ±Ø§Øª Ø¨Ù†Ø³Ø¨Ø© 40%.",
                views: 47,
                comments: 5,
                rating: 4.8,
                details: {
                    situation: "ÙˆØ§Ø¬Ù‡ Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠ ØªØ£Ø®ÙŠØ±Ø§Øª Ù…ØªÙƒØ±Ø±Ø© ÙˆØªØ¬Ø§ÙˆØ² ÙÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø¨Ø³Ø¨Ø¨ Ø¸Ù‡ÙˆØ± Ù…Ø®Ø§Ø·Ø± ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø©.",
                    whatWorked: "Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ù…Ø®Ø§Ø·Ø± Ø´Ø§Ù…Ù„ Ù…Ù†Ø° Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© â€¢ Ø¹Ù‚Ø¯ Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± â€¢ ØªØ¹ÙŠÙŠÙ† Ù…Ø³Ø¤ÙˆÙ„ Ù…ØªØ§Ø¨Ø¹Ø© Ù„ÙƒÙ„ Ø®Ø·Ø± Ù…Ø­ØªÙ…Ù„",
                    whatDidntWork: "Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªØ®Ù…ÙŠÙ† Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â€¢ Ø¹Ø¯Ù… Ø¥Ø´Ø±Ø§Ùƒ Ø¬Ù…ÙŠØ¹ Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚ ÙÙŠ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",
                    recommendations: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ù…ÙˆØ°Ø¬ SWOT ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ â€¢ ØªØ®ØµÙŠØµ 5% Ù…Ù† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ â€¢ Ø¥Ø´Ø±Ø§Ùƒ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø·Ø±Ø§Ù ÙÙŠ ÙˆØ±Ø´Ø© ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø±"
                }
            },
            {
                id: 2,
                title: "ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„ØªÙ†Ù…ÙŠØ©",
                category: "Ø¹Ù„Ø§Ù‚Ø§Øª",
                type: "warning",
                author: "ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ",
                date: "Ù…Ù†Ø° 4 Ø³Ø§Ø¹Ø§Øª",
                excerpt: "ÙˆØ§Ø¬Ù‡Ù†Ø§ ØµØ¹ÙˆØ¨Ø§Øª ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„ÙØ¹Ø§Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† Ø¨Ø³Ø¨Ø¨ Ø¹Ø¯Ù… ÙÙ‡Ù… Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙ‡Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©. ØªØ¹Ù„Ù…Ù†Ø§ Ø£Ù‡Ù…ÙŠØ© Ø¥Ø¬Ø±Ø§Ø¡ Ø¯Ø±Ø§Ø³Ø© Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø£ÙŠ Ù…Ø´Ø±ÙˆØ¹.",
                views: 32,
                comments: 3,
                rating: 4.2,
                details: {
                    situation: "ÙˆØ§Ø¬Ù‡ ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ØµØ¹ÙˆØ¨Ø© ÙÙŠ ÙÙ‡Ù… Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù…Ø§ Ø£Ø¯Ù‰ Ø¥Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ø®Ø¯Ù…Ø§Øª Ù„Ù… ØªÙ„Ø¨ÙŠ ØªÙˆÙ‚Ø¹Ø§ØªÙ‡Ù….",
                    whatWorked: "Ø¥Ø¬Ø±Ø§Ø¡ Ù…Ù‚Ø§Ø¨Ù„Ø§Øª ÙØ±Ø¯ÙŠØ© Ù…Ø¹ Ø¹ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† â€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³ØªØ¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø³Ø·Ø© ÙˆÙˆØ§Ø¶Ø­Ø©",
                    whatDidntWork: "Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø¯ÙˆÙ† Ø§Ù„ØªØ­Ù‚Ù‚ â€¢ Ø¹Ø¯Ù… Ø¥Ø´Ø±Ø§Ùƒ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ®Ø·ÙŠØ·",
                    recommendations: "Ø¥Ø¬Ø±Ø§Ø¡ Ø¯Ø±Ø§Ø³Ø© Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø£ÙŠ Ù…Ø´Ø±ÙˆØ¹ â€¢ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ø³ØªØ´Ø§Ø±ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† â€¢ Ø¹Ù‚Ø¯ Ø¬Ù„Ø³Ø§Øª Ø§Ø³ØªÙ…Ø§Ø¹ Ø¯ÙˆØ±ÙŠØ©"
                }
            },
            {
                id: 3,
                title: "Ù†Ø¬Ø§Ø­ ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†",
                category: "ØªÙ‚Ù†ÙŠØ©",
                type: "success",
                author: "Ù…Ø­Ù…Ø¯ Ø³Ø§Ù„Ù…",
                date: "Ù…Ù†Ø° ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯",
                excerpt: "ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¬Ø¯ÙŠØ¯ Ù„Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†ØŒ Ù…Ù…Ø§ Ø³Ù‡Ù„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙˆØ²Ø§Ø¯ Ù…Ù† ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¹Ù…Ù„ Ø¨Ù†Ø³Ø¨Ø© 60%.",
                views: 56,
                comments: 8,
                rating: 4.9,
                details: {
                    situation: "ÙƒØ§Ù†Øª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† ØªØªÙ… Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙŠØ¯ÙˆÙŠØ© Ù…Ù…Ø§ ÙŠØ³Ø¨Ø¨ ØµØ¹ÙˆØ¨Ø§Øª ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚.",
                    whatWorked: "Ø§Ø®ØªÙŠØ§Ø± Ù†Ø¸Ø§Ù… Ø³Ù‡Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆÙ…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù‡ÙˆØ§ØªÙ â€¢ ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ÙØ±ÙŠÙ‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ â€¢ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ù…Ø¬Ù…ÙˆØ¹Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© ØµØºÙŠØ±Ø©",
                    whatDidntWork: "Ù…Ø­Ø§ÙˆÙ„Ø© Ù†Ù‚Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ÙˆØ§Ø­Ø¯Ø© â€¢ Ø¹Ø¯Ù… ØªÙˆÙÙŠØ± Ø¯Ø¹Ù… ÙÙ†ÙŠ ÙƒØ§ÙÙ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©",
                    recommendations: "Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø© ÙˆØ§Ù„Ù…Ø±Ù†Ø© â€¢ ØªØ®ØµÙŠØµ ÙˆÙ‚Øª ÙƒØ§ÙÙ Ù„Ù„ØªØ¯Ø±ÙŠØ¨ â€¢ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠ Ù…Ø¹ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡"
                }
            }
        ];

        let currentStep = 1;
        let newLesson = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderLessons();
            setupEventListeners();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Search
            document.getElementById('searchBar').addEventListener('input', handleSearch);

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', handleFilter);
            });

            // Category selection
            document.querySelectorAll('.category-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.category-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    document.getElementById('lessonCategory').value = this.dataset.category;
                });
            });

            // Type selection
            document.querySelectorAll('.type-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.type-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    document.getElementById('lessonType').value = this.dataset.type;
                });
            });

            // Impact selection
            document.querySelectorAll('.impact-level').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.impact-level').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    document.getElementById('impactLevel').value = this.dataset.impact;
                });
            });

            // Close modals on outside click
            window.onclick = function(event) {
                const lessonModal = document.getElementById('lessonModal');
                const addModal = document.getElementById('addLessonModal');
                if (event.target === lessonModal) {
                    closeModal();
                }
                if (event.target === addModal) {
                    closeAddLessonForm();
                }
            }
        }

        // Render lessons
        function renderLessons(filteredLessons = lessons) {
            const container = document.getElementById('lessonsContainer');
            
            if (filteredLessons.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“­</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…Ø³ØªÙØ§Ø¯Ø©</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ø¯Ø±Ø³ Ù…Ø³ØªÙØ§Ø¯!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filteredLessons.map(lesson => `
                <div class="lesson-card" onclick="showLessonDetail(${lesson.id})">
                    <div class="lesson-header">
                        <div style="flex: 1;">
                            <div class="lesson-title">${lesson.title}</div>
                            <div class="lesson-meta">
                                <span class="meta-item">ğŸ‘¤ ${lesson.author}</span>
                                <span class="meta-item">ğŸ“… ${lesson.date}</span>
                                <span class="meta-item">ğŸ·ï¸ ${lesson.category}</span>
                            </div>
                        </div>
                        <span class="lesson-badge badge-${getBadgeClass(lesson.type)}">
                            ${getTypeLabel(lesson.type)}
                        </span>
                    </div>
                    <p class="lesson-excerpt">${lesson.excerpt}</p>
                    <div class="lesson-footer">
                        <div class="lesson-stats">
                            <span class="stat-item">ğŸ‘ï¸ ${lesson.views}</span>
                            <span class="stat-item">ğŸ’¬ ${lesson.comments}</span>
                            <span class="stat-item">â­ ${lesson.rating}</span>
                        </div>
                        <button class="view-btn" onclick="event.stopPropagation(); showLessonDetail(${lesson.id})">
                            Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ â†
                        </button>
                    </div>
                </div>
            `).join('');

            updateStats();
        }

        // Helper functions
        function getBadgeClass(type) {
            const classes = {
                'success': 'success',
                'failure': 'danger',
                'warning': 'warning',
                'opportunity': 'info'
            };
            return classes[type] || 'info';
        }

        function getTypeLabel(type) {
            const labels = {
                'success': 'âœ… Ù†Ø¬Ø§Ø­',
                'failure': 'âŒ ÙØ´Ù„',
                'warning': 'âš ï¸ ØªØ­Ø°ÙŠØ±',
                'opportunity': 'ğŸ’¡ ÙØ±ØµØ©'
            };
            return labels[type] || type;
        }

        function getCategoryLabel(category) {
            const labels = {
                'projects': 'Ù…Ø´Ø§Ø±ÙŠØ¹',
                'operations': 'Ø¹Ù…Ù„ÙŠØ§Øª',
                'relations': 'Ø¹Ù„Ø§Ù‚Ø§Øª',
                'technical': 'ØªÙ‚Ù†ÙŠØ©',
                'financial': 'Ù…Ø§Ù„ÙŠØ©'
            };
            return labels[category] || category;
        }

        // Show lesson detail
        function showLessonDetail(id) {
            const lesson = lessons.find(l => l.id === id);
            if (!lesson) return;

            const modal = document.getElementById('lessonModal');
            const content = document.getElementById('modalContent');

            content.innerHTML = `
                <h2 style="margin-bottom: 20px; padding-left: 50px;">${lesson.title}</h2>
                <div class="lesson-meta" style="margin-bottom: 30px;">
                    <span class="meta-item">ğŸ‘¤ ${lesson.author}</span>
                    <span class="meta-item">ğŸ“… ${lesson.date}</span>
                    <span class="meta-item">ğŸ·ï¸ ${lesson.category}</span>
                    <span class="lesson-badge badge-${getBadgeClass(lesson.type)}">
                        ${getTypeLabel(lesson.type)}
                    </span>
                </div>

                <div class="detail-section">
                    <h3>ğŸ“‹ Ø§Ù„Ø³ÙŠØ§Ù‚ ÙˆØ§Ù„Ø®Ù„ÙÙŠØ©</h3>
                    <p>${lesson.details.situation}</p>
                </div>

                <div class="detail-section">
                    <h3>âœ… Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù†Ø¬Ø­</h3>
                    <p>${lesson.details.whatWorked.split('â€¢').map(item => item.trim()).filter(Boolean).map(item => `â€¢ ${item}`).join('<br>')}</p>
                </div>

                <div class="detail-section">
                    <h3>âŒ Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù„Ù… ÙŠÙ†Ø¬Ø­</h3>
                    <p>${lesson.details.whatDidntWork.split('â€¢').map(item => item.trim()).filter(Boolean).map(item => `â€¢ ${item}`).join('<br>')}</p>
                </div>

                <div class="detail-section">
                    <h3>ğŸ’¡ Ø§Ù„ØªÙˆØµÙŠØ§Øª</h3>
                    <p>${lesson.details.recommendations.split('â€¢').map(item => item.trim()).filter(Boolean).map(item => `â€¢ ${item}`).join('<br>')}</p>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 30px; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="alert('Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ!')">â­ Ù‚ÙŠÙ‘Ù… Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³</button>
                    <button class="btn btn-secondary" onclick="alert('ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©!')">ğŸ”— Ø´Ø§Ø±Ùƒ</button>
                    <button class="btn btn-secondary" onclick="alert('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...')">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
                </div>
            `;

            modal.classList.add('active');
        }

        // Close modal
        function closeModal() {
            document.getElementById('lessonModal').classList.remove('active');
        }

        // Show add lesson form
        function showAddLessonForm() {
            document.getElementById('addLessonModal').classList.add('active');
            resetForm();
        }

        // Close add lesson form
        function closeAddLessonForm() {
            document.getElementById('addLessonModal').classList.remove('active');
            resetForm();
        }

        // Reset form
        function resetForm() {
            currentStep = 1;
            newLesson = {};
            document.getElementById('addLessonForm').reset();
            document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
            document.querySelector('.form-step[data-step="1"]').classList.add('active');
            document.querySelectorAll('.wizard-step').forEach(step => {
                step.classList.remove('active', 'completed');
            });
            document.querySelector('.wizard-step[data-step="1"]').classList.add('active');
            document.querySelectorAll('.category-option, .type-option, .impact-level').forEach(el => {
                el.classList.remove('selected');
            });
            document.getElementById('prevBtn').style.display = 'none';
            document.getElementById('nextBtn').textContent = 'Ø§Ù„ØªØ§Ù„ÙŠ â†';
            document.getElementById('successMessage').style.display = 'none';
        }

        // Next step
        function nextStep() {
            if (!validateStep(currentStep)) {
                return;
            }

            saveStepData(currentStep);

            if (currentStep < 4) {
                // Mark current as completed
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.remove('active');
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.add('completed');
                
                // Hide current step
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove('active');
                
                // Move to next
                currentStep++;
                
                // Show next step
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add('active');
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.add('active');
                
                // Update buttons
                document.getElementById('prevBtn').style.display = 'block';
                
                if (currentStep === 4) {
                    document.getElementById('nextBtn').textContent = 'Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³ âœ“';
                }
            } else {
                // Save lesson
                saveLesson();
            }
        }

        // Previous step
        function previousStep() {
            if (currentStep > 1) {
                // Remove active from current
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.remove('active');
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove('active');
                
                // Move to previous
                currentStep--;
                
                // Activate previous
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.remove('completed');
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.add('active');
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add('active');
                
                // Update buttons
                if (currentStep === 1) {
                    document.getElementById('prevBtn').style.display = 'none';
                }
                document.getElementById('nextBtn').textContent = 'Ø§Ù„ØªØ§Ù„ÙŠ â†';
            }
        }

        // Validate step
        function validateStep(step) {
            let isValid = true;
            let message = '';

            switch(step) {
                case 1:
                    if (!document.getElementById('lessonTitle').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³';
                        isValid = false;
                    } else if (!document.getElementById('projectName').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹';
                        isValid = false;
                    } else if (!document.getElementById('lessonCategory').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ';
                        isValid = false;
                    } else if (!document.getElementById('lessonType').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø±Ø³';
                        isValid = false;
                    }
                    break;
                case 2:
                    if (!document.getElementById('situation').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ù';
                        isValid = false;
                    }
                    break;
                case 3:
                    if (!document.getElementById('whatWorked').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø°ÙƒØ± Ù…Ø§ Ù†Ø¬Ø­';
                        isValid = false;
                    } else if (!document.getElementById('impactLevel').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ£Ø«ÙŠØ±';
                        isValid = false;
                    }
                    break;
                case 4:
                    if (!document.getElementById('recommendations').value) {
                        message = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªÙˆØµÙŠØ§Øª';
                        isValid = false;
                    }
                    break;
            }

            if (!isValid) {
                alert(message);
            }

            return isValid;
        }

        // Save step data
        function saveStepData(step) {
            switch(step) {
                case 1:
                    newLesson.title = document.getElementById('lessonTitle').value;
                    newLesson.project = document.getElementById('projectName').value;
                    newLesson.category = document.getElementById('lessonCategory').value;
                    newLesson.type = document.getElementById('lessonType').value;
                    break;
                case 2:
                    newLesson.situation = document.getElementById('situation').value;
                    newLesson.context = document.getElementById('context').value;
                    newLesson.expectedOutcome = document.getElementById('expectedOutcome').value;
                    newLesson.actualOutcome = document.getElementById('actualOutcome').value;
                    break;
                case 3:
                    newLesson.whatWorked = document.getElementById('whatWorked').value;
                    newLesson.whatDidntWork = document.getElementById('whatDidntWork').value;
                    newLesson.rootCause = document.getElementById('rootCause').value;
                    newLesson.impact = document.getElementById('impactLevel').value;
                    break;
                case 4:
                    newLesson.recommendations = document.getElementById('recommendations').value;
                    newLesson.preventiveMeasures = document.getElementById('preventiveMeasures').value;
                    newLesson.additionalNotes = document.getElementById('additionalNotes').value;
                    break;
            }
        }

        // Save lesson
        function saveLesson() {
            const lesson = {
                id: lessons.length + 1,
                title: newLesson.title,
                category: getCategoryLabel(newLesson.category),
                type: newLesson.type,
                author: "Ø£Ù†Øª",
                date: "Ø§Ù„Ø¢Ù†",
                excerpt: newLesson.situation.substring(0, 150) + "...",
                views: 0,
                comments: 0,
                rating: 0,
                details: {
                    situation: newLesson.situation,
                    whatWorked: newLesson.whatWorked,
                    whatDidntWork: newLesson.whatDidntWork || "Ù„Ø§ ÙŠÙˆØ¬Ø¯",
                    recommendations: newLesson.recommendations
                }
            };

            lessons.unshift(lesson);
            
            // Show success message
            document.getElementById('successMessage').style.display = 'block';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('prevBtn').style.display = 'none';

            // Refresh list
            renderLessons();

            // Close after 2 seconds
            setTimeout(() => {
                closeAddLessonForm();
            }, 2000);
        }

        // Handle search
        function handleSearch(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filtered = lessons.filter(lesson => 
                lesson.title.toLowerCase().includes(searchTerm) ||
                lesson.excerpt.toLowerCase().includes(searchTerm) ||
                lesson.author.toLowerCase().includes(searchTerm) ||
                lesson.category.toLowerCase().includes(searchTerm)
            );
            renderLessons(filtered);
        }

        // Handle filter
        function handleFilter(e) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            
            const filter = e.target.dataset.filter;
            
            if (filter === 'all') {
                renderLessons(lessons);
            } else {
                const filtered = lessons.filter(l => l.type === filter);
                renderLessons(filtered);
            }
        }

        // Update statistics
        function updateStats() {
            document.getElementById('totalLessons').textContent = lessons.length;
            
            if (lessons.length > 0) {
                const avgRating = (lessons.reduce((sum, l) => sum + l.rating, 0) / lessons.length).toFixed(1);
                document.getElementById('avgRating').textContent = avgRating;
            }
        }

        // Show analytics
        function showAnalytics() {
            alert('ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª\n\n' +
                  `Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³: ${lessons.length}\n` +
                  `Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${document.getElementById('avgRating').textContent}\n` +
                  `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª: ${lessons.reduce((sum, l) => sum + l.views, 0)}\n` +
                  `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª: ${lessons.reduce((sum, l) => sum + l.comments, 0)}`
            );
        }
    </script>
</body>
</html>
